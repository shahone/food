/*! For license information please see bundle.js.LICENSE.txt */
!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".modal");(function({sliderBody:e,sliderTape:t,slide:a,nextArr:o,prevArr:n,totalNum:s,currentNum:c}){const r=document.querySelector(e),i=document.querySelector(t),l=document.querySelectorAll(a),d=document.querySelector(o),u=document.querySelector(n),m=document.querySelector(s),g=document.querySelector(c),h=+window.getComputedStyle(r).width.replace(/\D/g,""),f=h*l.length;let y=0,v=1;function _(e){m.textContent=e<10?`0${e}`:e,document.querySelectorAll(".dot").forEach(((t,a)=>{t.classList.remove("active"),a===e-1&&t.classList.add("active")}))}r.style.overflow="hidden",i.style.display="flex",i.style.width=f+"px",i.style.position="relative",i.style.transition=".3s",l.length<10?(g.textContent=`0${l.length}`,m.textContent=`0${v}`):(g.textContent=l.length,m.textContent=v),u.addEventListener("click",(()=>{y===f-h?(y=0,v=0):y+=h,i.style.transform=`translateX(-${y}px)`,_(++v)})),d.addEventListener("click",(()=>{0===y?(y=f-h,v=l.length+1):y-=h,i.style.transform=`translateX(-${y}px)`,_(--v)}));const p=document.createElement("ul");p.classList.add("carousel-indicators"),r.append(p),r.style.position="relative",l.forEach((e=>{const t=document.createElement("li");t.classList.add("dot"),p.append(t)})),document.querySelectorAll(".dot").forEach(((e,t)=>{e.classList.remove("active"),t===v-1&&e.classList.add("active")})),p.addEventListener("click",(e=>function(e){e.target&&e.target.classList.contains("dot")&&document.querySelectorAll(".dot").forEach(((t,a)=>{e.target===t&&(y=h*a,v=a+1,_(v)),i.style.transform=`translateX(-${y}px)`}))}(e)))})({sliderBody:".offer__slider-wrapper",sliderTape:".offer__slider-inner",slide:".offer__slide",nextArr:".offer__slider-prev",prevArr:".offer__slider-next",totalNum:"#current",currentNum:"#total"}),function(e,t,a){const o=document.querySelectorAll(e),n=document.querySelectorAll(t),s=document.querySelector(a),c=(e=0)=>{o.forEach((e=>{e.classList.add("hide")})),o[e].classList.remove("hide"),o[e].classList.add("fade"),n.forEach(((e,t)=>{e.classList.remove("tabheader__item_active")})),n[e].classList.add("tabheader__item_active")};c(1),s.addEventListener("click",(e=>((e,t)=>{e.target&&e.target.matches(".tabheader__item")&&n.forEach(((t,a)=>{e.target===t&&c(a)}))})(e)))}(".tabcontent",".tabheader__item",".tabheader__items"),(()=>{const e=document.querySelector(".calculating__result span"),t=document.querySelector(".calculating__field");let a=localStorage.getItem("sex")||"male",o=localStorage.getItem("ratio")||"1.375",n=localStorage.getItem("height")||"",s=localStorage.getItem("weight")||"",c=localStorage.getItem("age")||"";function r(e,t){document.querySelectorAll(t).forEach((e=>{e.classList.remove("calculating__choose-item_active")})),e.classList.add("calculating__choose-item_active")}function i(){e.textContent=a&&n&&s&&c&&o?"female"===a?Math.round((447.6+9.2*s+3.1*n-4.3*c)*o):Math.round((88.36+13.4*s+4.8*n-5.7*c)*o):""}document.querySelectorAll(".calculating__choose-item").forEach((e=>{if(e.classList.remove("calculating__choose-item_active"),(e.getAttribute("data-ratio")===o||e.getAttribute("id")===a)&&e.classList.add("calculating__choose-item_active"),"INPUT"===e.tagName)switch(e.id){case"height":e.value=localStorage.getItem("height");break;case"weight":e.value=localStorage.getItem("weight");break;case"age":e.value=localStorage.getItem("age")}})),i(),t.addEventListener("click",(e=>function(e){if(e.target&&e.target.classList.contains("calculating__choose-item")){switch(e.target.id){case"female":a="female",localStorage.setItem("sex","female"),r(e.target,"[data-gender]");break;case"male":a="male",localStorage.setItem("sex","male"),r(e.target,"[data-gender]")}if("INPUT"===e.target.tagName){const t=window.getComputedStyle(e.target).width,a=e.target.getBoundingClientRect(),o=document.documentElement.scrollTop+a.bottom,r=document.createElement("div");r.classList.add("notice"),r.style.cssText=`\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: absolute;\n          top: ${o}px;\n          left: ${a.left}px;\n          width: ${t};\n          color: red;\n          opacity: 0;\n          transition: .5s;\n        `,r.textContent="в цифрах",document.body.append(r),e.target.addEventListener("input",(()=>{switch(e.target.value.match(/\D/g)&&(e.target.value=e.target.value.replace(/\D/g,""),r.style.opacity="1",setTimeout((()=>{r.style.opacity="0"}),500)),e.target.id){case"height":n=e.target.value,localStorage.setItem("height",n);break;case"weight":s=e.target.value,localStorage.setItem("weight",s);break;case"age":c=e.target.value,localStorage.setItem("age",c)}i()}))}e.target.dataset.ratio&&(o=e.target.dataset.ratio,localStorage.setItem("ratio",o),r(e.target,"[data-ratio]")),i()}}(e)))})(),function(e){function t(e){return e>=0&&e<10?`0${e}`:e<0?"00":e}!function(e,a){const o=document.querySelector(".timer"),n=o.querySelector("#days"),s=o.querySelector("#hours"),c=o.querySelector("#minutes"),r=o.querySelector("#seconds"),i=setInterval(l,1e3);function l(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date);return{t:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}(a);n.innerHTML=t(e.days),s.innerHTML=t(e.hours),c.innerHTML=t(e.minutes),r.innerHTML=t(e.seconds),e.t<=0&&(clearInterval(i),console.log(e.days))}l()}(0,e)}("2021-08-23"),function(e,t){const a=document.querySelectorAll(t),o=()=>{e.classList.toggle("show"),n()},n=()=>{const e=document.body,t=e.offsetWidth;if("hidden"===e.style.overflow)e.style.overflow="",e.style.marginRight="";else{e.style.overflow="hidden";const a=e.offsetWidth-t;e.style.marginRight=a+"px"}},s=()=>{document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(o(),window.removeEventListener("scroll",s))};a.forEach((e=>{e.addEventListener("click",(()=>{o()}))})),e.addEventListener("click",(t=>{(t.target===e||t.target.classList.contains("modal__close"))&&o()})),window.addEventListener("scroll",s)}(e,"[data-modal]"),function(){const e=document.querySelector(".menu__field .container");class t{constructor(e,t,a,o,n,...s){this.imgSrc=e,this.alt=t,this.subtitle=a,this.descr=o,this.price=n,this.rate=27,this.changeToUAH(),this.classes=s}changeToUAH(){this.price*=this.rate}createCard(){const t=document.createElement("div");0===this.classes.length?t.classList.add("menu__item"):this.classes.forEach((e=>t.classList.add(e))),t.innerHTML=`\n        <img src="${this.imgSrc}" alt="${this.alt}">\n        <h3 class="menu__item-subtitle">${this.subtitle}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-divider"></div>\n        <div class="menu__item-price">\n            <div class="menu__item-cost">Цена:</div>\n            <div class="menu__item-total"><span>${this.price}</span> грн/день</div>\n        </div>\n      `,e.append(t)}showData(){console.log(this.imgSrc,this.alt,this.subtitle,this.descr,this.price)}}axios.get("db.json").then((e=>{e.data.menu.forEach((({img:e,altimg:a,title:o,descr:n,price:s})=>{new t(e,a,o,n,s).createCard()}))}))}(),function(e){document.querySelectorAll("form").forEach((t=>function(t){t.addEventListener("submit",(a=>{a.preventDefault();const o=document.querySelector(".modal__content");o.classList.add("hide");const n=document.createElement("div");if(n.classList.add("modal__content"),n.innerHTML='<img src=img/spinner.svg alt="loading">',""===t.getAttribute("data-nomodal")){const e=document.querySelector(".order");e.style.position="relative",n.style.cssText="\n          width: fit-content;\n          height: fit-content;\n          position: absolute;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          margin: auto;\n        ",e.append(n)}else document.querySelector(".modal__dialog").append(n);const s=new FormData(t),c={};s.forEach(((e,t)=>{c[t]=e})),(async(e,t)=>{const a=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await a.json()})(0,JSON.stringify(Object.fromEntries(s.entries()))).then((e=>{console.log(JSON.stringify(e)),n.textContent="Ок"})).catch((()=>{console.log("error"),n.textContent="Что-то не то"})).finally((()=>{t.reset(),setTimeout((()=>{n.remove(),e.classList.remove("show"),o.classList.remove("hide"),document.body.style.overflow=""}),3e3)}))}))}(t)))}(e)}))}();
//# sourceMappingURL=bundle.js.map