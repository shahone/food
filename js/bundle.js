/*! For license information please see bundle.js.LICENSE.txt */
!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".modal");(function({sliderBody:e,sliderTape:t,slide:o,nextArr:a,prevArr:n,totalNum:s,currentNum:c}){const r=document.querySelector(e),l=document.querySelector(t),i=document.querySelectorAll(o),d=document.querySelector(a),u=document.querySelector(n),m=document.querySelector(s),g=document.querySelector(c),h=+window.getComputedStyle(r).width.replace(/\D/g,""),f=h*i.length;let v=0,y=1;function _(e){m.textContent=e<10?`0${e}`:e,document.querySelectorAll(".dot").forEach(((t,o)=>{t.classList.remove("active"),o===e-1&&t.classList.add("active")}))}r.style.overflow="hidden",l.style.display="flex",l.style.width=f+"px",l.style.position="relative",l.style.transition=".3s",i.length<10?(g.textContent=`0${i.length}`,m.textContent=`0${y}`):(g.textContent=i.length,m.textContent=y),u.addEventListener("click",(()=>{v===f-h?(v=0,y=0):v+=h,l.style.transform=`translateX(-${v}px)`,_(++y)})),d.addEventListener("click",(()=>{0===v?(v=f-h,y=i.length+1):v-=h,l.style.transform=`translateX(-${v}px)`,_(--y)}));const p=document.createElement("ul");p.classList.add("carousel-indicators"),r.append(p),r.style.position="relative",i.forEach((e=>{const t=document.createElement("li");t.classList.add("dot"),p.append(t)})),document.querySelectorAll(".dot").forEach(((e,t)=>{e.classList.remove("active"),t===y-1&&e.classList.add("active")})),p.addEventListener("click",(e=>function(e){e.target&&e.target.classList.contains("dot")&&document.querySelectorAll(".dot").forEach(((t,o)=>{e.target===t&&(v=h*o,y=o+1,_(y)),l.style.transform=`translateX(-${v}px)`}))}(e)))})({sliderBody:".offer__slider-wrapper",sliderTape:".offer__slider-inner",slide:".offer__slide",nextArr:".offer__slider-prev",prevArr:".offer__slider-next",totalNum:"#current",currentNum:"#total"}),function(e,t,o){const a=document.querySelectorAll(e),n=document.querySelectorAll(t),s=document.querySelector(o),c=(e=0)=>{a.forEach((e=>{e.classList.add("hide")})),a[e].classList.remove("hide"),a[e].classList.add("fade"),n.forEach(((e,t)=>{e.classList.remove("tabheader__item_active")})),n[e].classList.add("tabheader__item_active")};c(1),s.addEventListener("click",(e=>((e,t)=>{e.target&&e.target.matches(".tabheader__item")&&n.forEach(((t,o)=>{e.target===t&&c(o)}))})(e)))}(".tabcontent",".tabheader__item",".tabheader__items"),(()=>{const e=document.querySelector(".calculating__result span"),t=document.querySelector(".calculating__field");let o=localStorage.getItem("sex")||"male",a=localStorage.getItem("ratio")||"1.375",n=localStorage.getItem("height")||"",s=localStorage.getItem("weight")||"",c=localStorage.getItem("age")||"";function r(e,t){document.querySelectorAll(t).forEach((e=>{e.classList.remove("calculating__choose-item_active")})),e.classList.add("calculating__choose-item_active")}function l(){e.textContent=o&&n&&s&&c&&a?"female"===o?Math.round((447.6+9.2*s+3.1*n-4.3*c)*a):Math.round((88.36+13.4*s+4.8*n-5.7*c)*a):""}document.querySelectorAll(".calculating__choose-item").forEach((e=>{if(e.classList.remove("calculating__choose-item_active"),(e.getAttribute("data-ratio")===a||e.getAttribute("id")===o)&&e.classList.add("calculating__choose-item_active"),"INPUT"===e.tagName)switch(e.id){case"height":e.value=localStorage.getItem("height");break;case"weight":e.value=localStorage.getItem("weight");break;case"age":e.value=localStorage.getItem("age")}})),l(),t.addEventListener("click",(e=>function(e){if(e.target&&e.target.classList.contains("calculating__choose-item")){switch(e.target.id){case"female":o="female",localStorage.setItem("sex","female"),r(e.target,"[data-gender]");break;case"male":o="male",localStorage.setItem("sex","male"),r(e.target,"[data-gender]")}if("INPUT"===e.target.tagName){const t=window.getComputedStyle(e.target).width,o=e.target.getBoundingClientRect(),a=document.documentElement.scrollTop+o.bottom,r=document.createElement("div");r.classList.add("notice"),r.style.cssText=`\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: absolute;\n          top: ${a}px;\n          left: ${o.left}px;\n          width: ${t};\n          color: red;\n          opacity: 0;\n          transition: .5s;\n        `,r.textContent="в цифрах",document.body.append(r),e.target.addEventListener("input",(()=>{switch(e.target.value.match(/\D/g)&&(e.target.value=e.target.value.replace(/\D/g,""),r.style.opacity="1",setTimeout((()=>{r.style.opacity="0"}),500)),e.target.id){case"height":n=e.target.value,localStorage.setItem("height",n);break;case"weight":s=e.target.value,localStorage.setItem("weight",s);break;case"age":c=e.target.value,localStorage.setItem("age",c)}l()}))}e.target.dataset.ratio&&(a=e.target.dataset.ratio,localStorage.setItem("ratio",a),r(e.target,"[data-ratio]")),l()}}(e)))})(),function(e){function t(e){return e>=0&&e<10?`0${e}`:e<0?"00":e}!function(e,o){const a=document.querySelector(".timer"),n=a.querySelector("#days"),s=a.querySelector("#hours"),c=a.querySelector("#minutes"),r=a.querySelector("#seconds"),l=setInterval(i,1e3);function i(){const e=function(e){const t=Date.parse(e)-Date.parse(new Date);return{t:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}(o);n.innerHTML=t(e.days),s.innerHTML=t(e.hours),c.innerHTML=t(e.minutes),r.innerHTML=t(e.seconds),e.t<=0&&(clearInterval(l),console.log(e.days))}i()}(0,e)}("2021-08-23"),function(e,t){const o=document.querySelectorAll(t),a=()=>{e.classList.toggle("show"),n()},n=()=>{const e=document.body,t=e.offsetWidth;if("hidden"===e.style.overflow)e.style.overflow="",e.style.marginRight="";else{e.style.overflow="hidden";const o=e.offsetWidth-t;e.style.marginRight=o+"px"}},s=()=>{document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(a(),window.removeEventListener("scroll",s))};o.forEach((e=>{e.addEventListener("click",(()=>{a()}))})),e.addEventListener("click",(t=>{(t.target===e||t.target.classList.contains("modal__close"))&&a()})),window.addEventListener("scroll",s)}(e,"[data-modal]"),function(){const e=document.querySelector(".menu__field .container");class t{constructor(e,t,o,a,n,...s){this.imgSrc=e,this.alt=t,this.subtitle=o,this.descr=a,this.price=n,this.rate=27,this.changeToUAH(),this.classes=s}changeToUAH(){this.price*=this.rate}createCard(){const t=document.createElement("div");0===this.classes.length?t.classList.add("menu__item"):this.classes.forEach((e=>t.classList.add(e))),t.innerHTML=`\n        <img src="${this.imgSrc}" alt="${this.alt}">\n        <h3 class="menu__item-subtitle">${this.subtitle}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-divider"></div>\n        <div class="menu__item-price">\n            <div class="menu__item-cost">Цена:</div>\n            <div class="menu__item-total"><span>${this.price}</span> грн/день</div>\n        </div>\n      `,e.append(t)}showData(){console.log(this.imgSrc,this.alt,this.subtitle,this.descr,this.price)}}axios.get("db.json").then((e=>{e.data.menu.forEach((({img:e,altimg:o,title:a,descr:n,price:s})=>{new t(e,o,a,n,s).createCard()}))}))}(),function(e){document.querySelectorAll("form").forEach((t=>function(t){t.addEventListener("submit",(o=>{o.preventDefault();const a=document.querySelector(".modal__content");a.classList.add("hide");const n=document.createElement("div");if(n.classList.add("modal__content"),n.innerHTML='<img src=img/spinner.svg alt="loading">',""===t.getAttribute("data-nomodal")){const e=document.querySelector(".order");e.style.position="relative",n.style.cssText="\n          width: fit-content;\n          height: fit-content;\n          position: absolute;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          margin: auto;\n        ",e.append(n)}else document.querySelector(".modal__dialog").append(n);const s=new FormData(t);console.log(s);const c={};s.forEach(((e,t)=>{c[t]=e})),console.log(c);const r=JSON.stringify(Object.fromEntries(s.entries()));console.log(r),(async(e,t)=>{const o=await fetch("server.php",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await o.text()})(0,r).then((e=>{console.log(e),n.textContent="Ок"})).catch((()=>{console.log("error"),n.textContent="Что-то не то"})).finally((()=>{t.reset(),setTimeout((()=>{n.remove(),e.classList.remove("show"),a.classList.remove("hide"),document.body.style.overflow=""}),3e3)}))}))}(t)))}(e)}))}();
//# sourceMappingURL=bundle.js.map